<jegyzi-title></jegyzi-title>
<div class="mx-20">
  @if(notes$ | async; as notes) {
  <form [formGroup]="filterForm">
    <div class="flex w-[70%] justify-between mb-10 -mt-10">
      <div class="flex w-[80%] gap-8 items-center">
        <input class="searchbar" placeholder="Keress rá a felhasználó nevére" matInput type="text" formControlName="name" />
        <!--TODO: Szűrés-->
        <button type="submit">
          <span class="ph ph-magnifying-glass btn-icon"></span>
        </button>
      </div>
      <!--TODO: SORRENDEZÉS -->
      <button type="submit" matTooltip="Rendezés">
        <span class="ph ph-funnel-simple btn-icon"></span>
      </button>
    </div>

    <div class="w-full flex justify-between">
      <div class="flex flex-col gap-10 w-[70%]">
        @for (note of notes; track note.id) {

        <a [routerLink]="'/notes/' + note.id" class="flex gap-8 rounded-3xl bg-background-200 px-6 py-4 items-center">
          <jegyzi-avatar [profileId]="note.creatorId"></jegyzi-avatar>
          <div class="flex flex-col gap-1 text-primary-600">
            <div class="font-semibold mb-1">{{ note.title }}</div>
            <div class="text-sm">{{ note.subTitle }}</div>
            <div class="text-sm">Létrehozva: {{ note.created | toDate | date : 'YYYY.MM.dd HH:MM' }}</div>
            <div class="text-sm">Módosítva: {{ note.lastModify | toDate | date : 'YYYY.MM.dd HH:MM' }}</div>
          </div>
          <div class="flex flex-col mr-0 ml-auto self-start">
            <div class="relative w-8 h-8 text-center" matTooltip="Követők száma">
              <span class="ph-fill ph-heart ph-2x text-heart-100 text-center"></span>
              <span class="absolute text-white text-[12px] text-center w-8 left-0 top-1.5 font-semibold">{{
                note.followers ? note.followers.length : 0
              }}</span>
            </div>
          </div>
        </a>
        }
      </div>
      <div class="bg-background-200 rounded-3xl px-6 py-4 text-sm">
        <span class="font-semibold text-lg text-primary-600 mb-10">Szűrés</span>
      </div>
    </div>
  </form>
  }
</div>
