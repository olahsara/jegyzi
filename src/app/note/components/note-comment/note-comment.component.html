<div class="text-sm">
  <div class="text-xl font-semibold text-primary-600 mb-4">Hozzászólások</div>
  @if(loggedInUser(); as loggedInUser) {
  <div class="flex gap-x-4 justify-center mb-4">
    <jegyzi-avatar
      [profileId]="loggedInUser.id"
      size="md"
      [editable]="false"
      [profilPicEnabled]="loggedInUser.profilePicture"
    ></jegyzi-avatar>
    <form [formGroup]="commentForm" class="flex-grow">
      <div class="form-control w-full">
        <textarea matInput type="text" formControlName="comment" rows="3" class="-mb-6" placeholder="Szólj hozzá!"></textarea>
      </div>
    </form>
    <button
      type="button"
      (click)="submit()"
      class="self-end bg-background-600 text-primary-100 rounded-full h-[2.5rem] w-[2.5rem] flex items-center justify-center"
    >
      <span class="ph ph-paper-plane-tilt ph-xl"></span>
    </button>
  </div>

  } @if(comments() | async; as comments) { @for(comment of comments; track comment.id) {
  <div class="flex gap-x-4 justify-center mb-2">
    <jegyzi-avatar
      [profileId]="comment.creatorId"
      size="md"
      [editable]="false"
      [link]="comment.creatorId ? '/profiles/' + comment.creatorId : '/profiles'"
      [profilPicEnabled]="comment.creatorProfilPic"
    ></jegyzi-avatar>
    <div class="bg-background-200 px-4 py-2 rounded-xl flex-grow text-primary-600 min-h-[4rem]">
      {{ comment.comment }}
    </div>
  </div>
  } @empty {
  <div class="py-2 px-4 mb-4 text-base text-center">
    <span class="text-primary-300">Ehhez a jegyzethez még nem érkezett hozzászólás!</span>
  </div>

  } @if(note().comments.length > 10 ) { @if(allComments()){
  <button type="button" class="btn-small btn-secondary mx-auto" (click)="loadLessComment()">Kevesebb hozzászólás mutatása</button>
  } @else {
  <button type="button" class="btn-small btn-secondary mx-auto" (click)="loadMoreComment()">További hozzászólások betöltése</button>
  } } }
</div>
